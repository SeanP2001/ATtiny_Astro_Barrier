
#include "Bullet.h"
#include "Sprites.h"

#include <ssd1306xled.h>
#include <font6x8.h>

#define defaultY0 7
#define defaultY1 8

//---------------------------------------------------------------------------------------------------------------------------------------------------
Bullet::Bullet()
{
  this->y0 = defaultY0;           // y coordinate of the top left corner
  this->y1 = defaultY1;           // y coordinate of the bottom right corner

  this->fired = false;
}

//---------------------------------------------------------------------------------------------------------------------------------------------------
void Bullet::fire(uint8_t _x0, uint8_t _x1)
{
  fired = true;
 
  x0 = _x0;
  x1 = _x1;
}

//---------------------------------------------------------------------------------------------------------------------------------------------------
void Bullet::reload()
{
  y0 = defaultY0;          
  y1 = defaultY1;           

  fired = false;
}

//---------------------------------------------------------------------------------------------------------------------------------------------------
void Bullet::updateBullet()
{
  y0 = y0 - 1;
  y1 = y1 - 1;

  if (y1 <= 0)
  {
    Bullet::reload();
  }
    
}

//---------------------------------------------------------------------------------------------------------------------------------------------------
void Bullet::drawBullet()
{
  SSD1306.ssd1306_draw_bmp(x0, y0, x1, y1, bullet);
}

//---------------------------------------------------------------------------------------------------------------------------------------------------
void Bullet::drawBlank()
{
  SSD1306.ssd1306_draw_bmp(x0, y0, x1, y1, smallBlank);
}

//---------------------------------------------------------------------------------------------------------------------------------------------------
bool Bullet::inRange(uint8_t _x0, uint8_t _y0, uint8_t _x1, uint8_t _y1)
{
  if ((y1 <= _y1) && (y0 >= _y0) && (x1 <= _x1) && (x0 >= _x0)) 
  {
    return true; 
  }
  else
  {
    return false;
  }
}
